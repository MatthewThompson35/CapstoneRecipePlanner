<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\destiny\OneDrive\Desktop\CapstoneRecipePlanner\code\RecipePlannerApplication\RecipePlannerWebApplication\Views\Home\PlannedMealsPage.cshtml</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
@{
    ViewBag.Title = &quot;Meal Plan&quot;;
    var mealTypes = new List&lt;string&gt; { &quot;Breakfast&quot;, &quot;Lunch&quot;, &quot;Dinner&quot; };
}
&lt;div&gt;
    &lt;h2&gt;@ViewBag.Header&lt;/h2&gt;
    &lt;form method=&quot;post&quot; action=&quot;@Url.Action(&quot;ToggleWeek&quot;, &quot;Home&quot;, new { currentWeek = ViewBag.CurrentWeek })&quot;&gt;
        &lt;button&gt;Switch Weeks&lt;/button&gt;
    &lt;/form&gt;
    
&lt;/div&gt;
&lt;div&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;Monday&lt;/th&gt;
                &lt;th&gt;Tuesday&lt;/th&gt;
                &lt;th&gt;Wednesday&lt;/th&gt;
                &lt;th&gt;Thursday&lt;/th&gt;
                &lt;th&gt;Friday&lt;/th&gt;
                &lt;th&gt;Saturday&lt;/th&gt;
                &lt;th&gt;Sunday&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
        &lt;th&gt;Meal Type&lt;/th&gt;
        &lt;td&gt;
            &lt;select id=&quot;Monday&quot; onchange=&quot;handleChange(&#39;Monday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Monday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Tuesday&quot; onchange=&quot;handleChange(&#39;Tuesday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Tuesday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Wednesday&quot; onchange=&quot;handleChange(&#39;Wednesday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Wednesday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Thursday&quot; onchange=&quot;handleChange(&#39;Thursday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Thursday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Friday&quot; onchange=&quot;handleChange(&#39;Friday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Friday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Saturday&quot; onchange=&quot;handleChange(&#39;Saturday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Saturday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;select id=&quot;Sunday&quot; onchange=&quot;handleChange(&#39;Sunday&#39;)&quot;&gt;
                    @foreach (var item in mealTypes)
                    {
                    &lt;option&gt;@item&lt;/option&gt;
                    }
            &lt;/select&gt;
            &lt;button onclick=&quot;removeColumn(&#39;Sunday&#39;)&quot;&gt;Remove&lt;/button&gt;
        &lt;/td&gt;
        &lt;tr&gt;
            &lt;th&gt;Recipe Name&lt;/th&gt;
            &lt;td id=&quot;MondayDetails&quot;&gt;@ViewBag.DefaultValues[0]&lt;/td&gt;
            &lt;td id=&quot;TuesdayDetails&quot;&gt;@ViewBag.DefaultValues[1]&lt;/td&gt;
            &lt;td id=&quot;WednesdayDetails&quot;&gt;@ViewBag.DefaultValues[2]&lt;/td&gt;
            &lt;td id=&quot;ThursdayDetails&quot;&gt;@ViewBag.DefaultValues[3]&lt;/td&gt;
            &lt;td id=&quot;FridayDetails&quot;&gt;@ViewBag.DefaultValues[4]&lt;/td&gt;
            &lt;td id=&quot;SaturdayDetails&quot;&gt;@ViewBag.DefaultValues[5]&lt;/td&gt;
            &lt;td id=&quot;SundayDetails&quot;&gt;@ViewBag.DefaultValues[6]&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;View Recipes&lt;/th&gt;
            &lt;td&gt;
                &lt;button id=&quot;MondayButton&quot; onclick=&quot;showRecipeDetails(&#39;Monday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;TuesdayButton&quot; onclick=&quot;showRecipeDetails(&#39;Tuesday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;WednesdayButton&quot; onclick=&quot;showRecipeDetails(&#39;Wednesday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;ThursdayButton&quot; onclick=&quot;showRecipeDetails(&#39;Thursday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;FridayButton&quot; onclick=&quot;showRecipeDetails(&#39;Friday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;SaturdayButton&quot; onclick=&quot;showRecipeDetails(&#39;Saturday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button id=&quot;SundayButton&quot; onclick=&quot;showRecipeDetails(&#39;Sunday&#39;)&quot;&gt;View Recipe&lt;/button&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/div&gt;

&lt;div id=&quot;recipe-details&quot;&gt;
    &lt;div id=&quot;recipe-details-box&quot; style=&quot;overflow: auto;&quot;&gt;
        @foreach (var recipe in ViewBag.AllRecipes)
        {
            &lt;div id=&quot;@recipe.RecipeId&quot; style=&quot;display: none&quot;&gt;
                &lt;h3 class=&quot;recipe-name&quot;&gt;@recipe.Name&lt;/h3&gt;
                &lt;p class=&quot;recipe-description&quot;&gt;@recipe.Description&lt;/p&gt;
                &lt;h4&gt;Steps&lt;/h4&gt;
                &lt;ol class=&quot;recipe-steps&quot;&gt;
                    @foreach (var step in recipe.Steps)
                    {
                        &lt;li&gt;@step.stepDescription&lt;/li&gt;
                    }
                &lt;/ol&gt;
                &lt;h4&gt;Ingredients&lt;/h4&gt;
                &lt;ul class=&quot;recipe-ingredients&quot;&gt;
                    @foreach (var ingredient in recipe.Ingredients)
                    {
                        &lt;li&gt;@ingredient.Quantity @ingredient.IngredientName&lt;/li&gt;
                    }
                &lt;/ul&gt;
            &lt;/div&gt;
        }
    &lt;/div&gt;
&lt;/div&gt;
&lt;style&gt;
    #recipe-details {
        align-items: center;
        display: flex;
        flex: 1;
        margin-left: 50px;
    }

    #recipe-details-box {
        border: 1px solid black;
        height: 300px;
        padding: 10px;
        padding-top: 20px;
        position: relative;
        width: 95%;
    }

        #recipe-details-box h3 {
            margin-top: 0;
        }

        #recipe-details-box p {
            margin: 0;
        }

    h2 {
        margin-top: 20px;
        text-align: center;
    }

    table {
        border-collapse: collapse;
        margin: 0 auto;
        margin-bottom: 20px;
        max-width: 800px;
        padding-bottom: 10px;
        table-layout: fixed;
        top: 200px;
        width: 100%;
    }

    th,
    td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        width: 125px;
    }

    th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    select {
        border: none;
        border-radius: 4px;
        box-sizing: border-box;
        padding: 8px;
        width: 100%;
    }

    button {
        background-color: #4CAF50;
        border: none;
        border-radius: 4px;
        color: white;
        cursor: pointer;
        display: inline-block;
        font-size: 16px;
        padding: 8px;
        text-align: center;
        text-decoration: none;
    }

        button[disabled] {
            cursor: not-allowed;
            opacity: 0.5;
        }

    td[id$=&quot;Details&quot;] {
        border: 1px solid #ddd;
        border-top: none;
        padding: 16px;
    }
&lt;/style&gt;
&lt;script&gt;
    window.onload = function () {
        doDefaultMeals();
    };
    
    function toggleWeek() {
        if (&quot;@ViewBag.CurrentWeek&quot; === &quot;Next Week&quot;) {
            var url = &quot;@Url.Action(&quot;goToPlannedMealsPageNextWeek&quot;, &quot;Home&quot;)&quot;;
        } else {
            var url = &quot;@Url.Action(&quot;goToPlannedMealsPage&quot;, &quot;Home&quot;)&quot;;
        }
        $.ajax({
          url: url,
          method: &quot;POST&quot;,
          success: function(response) {

          }
        });
    }
    

    function doDefaultMeals() {
        handleChange(&#39;Monday&#39;);
        handleChange(&#39;Tuesday&#39;);
        handleChange(&#39;Wednesday&#39;);
        handleChange(&#39;Thursday&#39;);
        handleChange(&#39;Friday&#39;);
        handleChange(&#39;Saturday&#39;);
        handleChange(&#39;Sunday&#39;);
    };
    
    function removeColumn(day){
        var mealType = document.getElementById(day).value;
        var dayDetails = day + &quot;Details&quot;;
        var detailsElement = document.getElementById(dayDetails);
        var week = &quot;@ViewBag.CurrentWeek&quot;

        $.ajax({
            type: &quot;GET&quot;,
            url: &quot;@Url.Action(&quot;RemoveThisWeeksMeal&quot;, &quot;Home&quot;)&quot;,
            data: { day: day, mealType: mealType, week: week },
            success: function (response) {
                console.log(response);
                var recipeName = response.recipeName;
                detailsElement.innerHTML = recipeName;
            },
            error: function (xhr, status, error) {
                console.log(xhr.responseText);
            }
        });
        }

    function handleChange(day) {
        var mealType = document.getElementById(day).value;
        var dayDetails = day + &quot;Details&quot;;
        var detailsElement = document.getElementById(dayDetails);
        var week = &quot;@ViewBag.CurrentWeek&quot;

        $.ajax({
            type: &quot;GET&quot;,
            url: &quot;@Url.Action(&quot;GetRecipeName&quot;, &quot;Home&quot;)&quot;,
            data: { day: day, mealType: mealType, week: week },
            success: function (response) {
                console.log(response);
                var recipeName = response.recipeName;
                detailsElement.innerHTML = recipeName;
            },
            error: function (xhr, status, error) {
                console.log(xhr.responseText);
            }
        });

        document.getElementById(dayDetails).value = recipeId;
    }

    function showRecipeDetails(day) {
        var mealType = document.getElementById(day).value;
        var week = &quot;@ViewBag.CurrentWeek&quot;

        $.ajax({
            type: &quot;GET&quot;,
            url: &quot;@Url.Action(&quot;GetRecipeName&quot;, &quot;Home&quot;)&quot;,
            data: { day: day, mealType: mealType, week: week },
            success: function (response) {
                console.log(response);
                var recipeId = response.recipeId;
                showRecipe(recipeId);
            },
            error: function (xhr, status, error) {
                console.log(xhr.responseText);
            }
        });
    }





    function showRecipe(recipeId) {
        var recipeDetails = document.getElementById(&quot;recipe-details-box&quot;);
        var allRecipes = recipeDetails.children;
        for (var i = 0; i &lt; allRecipes.length; i++) {
            allRecipes[i].style.display = &quot;none&quot;;
        }

        // Show the recipe details for the specified recipe ID
        var recipe = document.getElementById(recipeId);
        recipe.style.display = &quot;block&quot;;

        // Set the meal type in the corresponding details cell
        var detailsCell = document.getElementById(mealType + &quot;Details&quot;);
        detailsCell.innerHTML = &quot;Recipe &quot; + recipeId;

    }

&lt;/script&gt;
    </pre>
    <script type="text/javascript">
      highlightRanges([[2,5,2,33,0],[3,5,3,73,0],[6,10,6,25,0],[7,33,7,110,0],[30,22,30,29,0],[30,31,30,39,0],[30,40,30,42,0],[30,43,30,52,0],[31,21,31,22,0],[32,30,32,35,0],[33,21,33,22,0],[39,22,39,29,0],[39,31,39,39,0],[39,40,39,42,0],[39,43,39,52,0],[40,21,40,22,0],[41,30,41,35,0],[42,21,42,22,0],[48,22,48,29,0],[48,31,48,39,0],[48,40,48,42,0],[48,43,48,52,0],[49,21,49,22,0],[50,30,50,35,0],[51,21,51,22,0],[57,22,57,29,0],[57,31,57,39,0],[57,40,57,42,0],[57,43,57,52,0],[58,21,58,22,0],[59,30,59,35,0],[60,21,60,22,0],[66,22,66,29,0],[66,31,66,39,0],[66,40,66,42,0],[66,43,66,52,0],[67,21,67,22,0],[68,30,68,35,0],[69,21,69,22,0],[75,22,75,29,0],[75,31,75,39,0],[75,40,75,42,0],[75,43,75,52,0],[76,21,76,22,0],[77,30,77,35,0],[78,21,78,22,0],[84,22,84,29,0],[84,31,84,39,0],[84,40,84,42,0],[84,43,84,52,0],[85,21,85,22,0],[86,30,86,35,0],[87,21,87,22,0],[93,37,93,62,0],[94,38,94,63,0],[95,40,95,65,0],[96,39,96,64,0],[97,37,97,62,0],[98,39,98,64,0],[99,37,99,62,0],[131,10,131,17,0],[131,19,131,29,0],[131,30,131,32,0],[131,33,131,51,0],[132,9,132,10,0],[133,22,133,39,0],[134,42,134,54,0],[135,48,135,67,0],[138,22,138,29,0],[138,31,138,39,0],[138,40,138,42,0],[138,43,138,55,0],[139,21,139,22,0],[140,30,140,51,0],[141,21,141,22,0],[145,22,145,29,0],[145,31,145,45,0],[145,46,145,48,0],[145,49,145,67,0],[146,21,146,22,0],[147,30,147,50,0],[147,51,147,77,0],[148,21,148,22,0],[151,9,151,10,0],[246,15,246,35,0],[247,25,247,76,0],[249,25,249,68,0],[275,22,275,42,0],[279,20,279,62,0],[296,22,296,42,0],[300,20,300,56,0],[317,22,317,42,0],[321,20,321,56,0]]);
    </script>
  </body>
</html>